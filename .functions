#!/bin/bash
export CLICOLOR=1
function scpup2 () 
{ 
	if [ ! $1 ]; then
		echo "Usage: scpup2 sourcefile destinationfile"
		return 1
	elif [ ! $2 ]; then
		DEST=$(basename $1)
	else
		DEST=$2
    fi
	echo root@vwebsk.kmundp.de:~/$DEST
	return $?
    scp -r $1 root@vwebsk.kmundp.de:~/$DEST
}

# FileSearch
function f() {
    if [ $# -eq 1 ]; then
        find . -iname "*$1*"
    fi

    #find $SEARCHPATH -iname "*$1*" ${@:2}
    
    PARAM=$1
    f_it() {
        find "$@" -iname "*$PARAM*"
    }

    shift
    for fname in "$@"; do
        f_it "$fname"
    done


}
function fpx() {
    SP='./'
    echo "$1"
    echo "$2"
    if [ -z $1 ]; then
        echo "-z $1 true"
    else
        echo "-z $1 false"
    fi
    if [ -z $2 ]; then
        echo "-z $2 true"
    else
        echo "-z $2 false"
    fi
    if [ -n $1 ]; then
        echo "-n $1 true"
    else
        echo "-n $1 false"
    fi
    if [ -n $2 ]; then
        echo "-n $2 true"
    else
        echo "-n $2 false"
    fi
}

function fp() {
    SP='./'
    echo $#
    # PARAMCOUNT=$(($#+1))
    PARAMCOUNT=$#
    # PARAMCOUNT=$(($#-1))
    if [ -n $2 ]; then
        SP=$(abspath $2)
        PARAMCOUNT=3
    fi
    echo "find $SP -iname \"*$1*\" ${@:PARAMCOUNT}"
    find $SP -iname "*$1*" ${@:PARAMCOUNT}
}

function param() {
    PC=2
    echo "1 ${@:1}"
    echo "2 ${@:2}"
    echo "3 ${@:3}"
    echo "$PC ${@:PC}"
	echo "$1" ${@:2} -R . 
}

function r() {
#    grep "$1" ${@:2} -R . 
    PARAM=$1
    r_it() {
        grep -irl $PARAM "$@"
    }

    shift
    for fname in "$@";
    do
        r_it "$fname"
    done


}

#mkdir and cd
function mkcd() { mkdir -p "$@" && cd "$_"; }

function opex() {
    xdg-open $1 &
}

alldoc() { 
    for fname in "$@"; do 
        fmp_helper "$fname";
    done  


    fmp_helper() { 
        echo "$@"; 
    }
}

fmp ()  {

    fmp2() { 
        nautilus "$@"; 
    };

    for fname in "$@";
    do         
        fmp2 "$fname";         
    done; 
}


chparam ()  {
    chparam2() {
        echo "$@";
    };
      
    for fname in "$@";
    do
        chparam2 "$fname";
    done;
}

 
chparam_a ()  {
    echo "$@";
    echo $1
    # shift
    # echo "1: ${@:1}";
    # echo "2: ${@:2}";
    echo "####################"
    chparam_a2() {
        echo "2: $(abspath $@)";
    };
                         
    # echo "for fname in `ls \"$@\"`";
    for fname in `ls "$@"`;
    do
        echo "$fname"
        chparam_a2 "$fname";
        echo "##########"
    done;
 }

checkfile() {
    if [ $# -eq 2 ];then
        COUNT=$1
    else
        COUNT=45
    fi

    checkfile_it() {
        while true;
        do 
            clear;
            tail -$COUNT "$@";
            sleep 1;
        done
    }

    if [ $# -eq 2 ];then
        shift
    fi
    for fname in "$@"
    do
        checkfile_it "$fname"
    done

}

function lns() {
    OPT=''
    if [ -n $3 ]; then
        OPT=$3
    fi
    ln -s$OPT `pwd`/$1 $2;

}

function lna() {
    PARAM1=$1
    PARAM2=$2

    lna_it() {
        for file in `ls $1`; 
        do
            ln -s  $1/$file $2/$file;
        done
    }

    lna_it "$PARAM1" "$PARAM2"
}

show() { 
    #cat ~/unutmalist/*$1*;
    tail -n +1  ~/unutmalist/*$1*;
}

cheat() { 
    open http://borkware.com/quickies/one?topic=$1; 
}

r2() {
    PARAM=$1
    r2_it() {
        grep -irl $PARAM "$@"
    }
    shift
    callfunction r2_it "$@"
}

callfunction() {
    $1 $2
}

testfunc2 ()
{
    echo "$# parameters";
    echo Using '$*';
    for p in $*;
    do
        echo "[$p]";
    done;
    echo Using '"$*"';
    for p in "$*";
    do
        echo "[$p]";
    done;
    echo Using '$@';
    for p in $@;
    do
        echo "[$p]";
    done;
    echo Using '"$@"';
    for p in "$@";
    do
        echo "[$p]";
    done
}

opentimedoc() {
    CURRENT_DOC=$(ls -t ~/Documents/Tätigkeitsnachweis/ | head -n 1)
    echo ~/Documents/Tätigkeitsnachweis/$CURRENT_DOC
    open /Applications/Microsoft\ Excel.app ~/Documents/Tätigkeitsnachweis/$CURRENT_DOC
}

manx() {
    echo $*
    /usr/bin/man $* > ~/temp.txt
    if [ -s ~/temp.txt ]; then 
        subl ~/temp.txt
    fi

}

giturlp() {
    PATH2REPO='.'
    if [ $# -eq 1 ]; then
        PATH2REPO="$@"
    fi

    cat $PATH2REPO/.git/config | grep -i url | cut -d'=' -f 2
}

androiddoc () { 
    open "http://android-docs.local/$1"; 
}
timestamp() {   date +"%s"; }
ymd() { date "+%Y%m%d"; }
