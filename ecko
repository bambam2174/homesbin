#!/bin/zsh

_ecko() {

    BOLD='%b'
    NL=$'\n'
    KF='%k%f'

    CNTR=0
    for param in ${@}
    do
        startsWithDash ${param} && ([[ ${param/-/} = "-bold" ]] || [[ ${param/-/} = "b" ]]) && BOLD='%B' && ((CNTR++))
        startsWithDash ${param} && ([[ ${param/-/} = "-newline" ]] || [[ ${param/-/} = "n" ]]) && NL='' && ((CNTR++))
    done

    shift ${CNTR}

    FGC=''
    BGC=''

    if isNumeric ${1}
    then
	    TEXT="$(cat < /dev/stdin)"
    else
	    TEXT="${1}"
    	shift
    fi


    [[ -n ${1} ]] && isNumeric ${1} && FGC="%F{${1}}"
    [[ -n ${2} ]] && isNumeric ${2} && BGC="%K{${2}}"
    [[ -n ${3} ]] && isNumeric ${3} && KF=''

    print -Pn "${FGC}${BGC}${BOLD}${TEXT}${KF}" ${NL} > /dev/stdin
}

_ecko ${@}

